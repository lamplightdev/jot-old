(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var version = 1;

importScripts('/js/serviceworker-cache-polyfill.js');

var cacheNameStatic = 'jot-static-v' + version;
var cacheNameGoogleAvatar = 'jot-google-avatar-v' + version;

var currentCacheNames = [cacheNameStatic, cacheNameGoogleAvatar];

self.addEventListener('install', function (event) {
  event.waitUntil(caches.open(cacheNameStatic).then(function (cache) {
    return cache.addAll(['/', '/css/app.css', '/js/dist/app.js', '/js/browser-polyfill.js', '/js/pouchdb.js', '/js/webfontloader.js']);
  }));
});

self.addEventListener('activate', function (event) {
  event.waitUntil(caches.keys().then(function (cacheNames) {
    return Promise.all(cacheNames.map(function (cacheName) {
      if (currentCacheNames.indexOf(cacheName) === -1) {
        return caches.delete(cacheName);
      }
    }));
  }));
});

self.addEventListener('fetch', function (event) {
  var selfURL = self.location;
  var requestURL = new URL(event.request.url);

  if (requestURL.pathname.indexOf('/auth/') === 0 && requestURL.pathname !== '/auth/user') {
    return;
  }

  // if no extension, assume it's a page (not root)
  if (selfURL.host === requestURL.host && requestURL.pathname.indexOf('.') === -1 && requestURL.pathname !== '/auth/user') {
    event.respondWith(caches.match('/').then(function (cacheResponse) {
      return cacheResponse;
    }, function (err) {
      console.log('sw match error: ', err);
    }));
  } else {
    event.respondWith(caches.match(event.request).then(function (response) {
      if (response) {
        return response;
      }

      var fetchRequest = event.request.clone();

      return fetch(fetchRequest).then(function (fetchResponse) {
        var shouldCache = false;

        if (fetchResponse.type === 'basic' && fetchResponse.status === 200) {
          // shouldCache = cacheNameStatic;
        } else if (fetchResponse.type === 'opaque') {
            // if response isn't from our origin / doesn't support CORS
            if (requestURL.hostname.indexOf('.googleusercontent.com') > -1) {
              shouldCache = cacheNameGoogleAvatar;
            } else {
              // just let response pass through, don't cache
            }
          }

        if (shouldCache) {
          (function () {
            var responseToCache = fetchResponse.clone();

            caches.open(shouldCache).then(function (cache) {
              var cacheRequest = event.request.clone();
              cache.put(cacheRequest, responseToCache);
            });
          })();
        }

        return fetchResponse;
      }, function (err) {
        console.log('sw fetch error: ', err);
        if (requestURL.pathname === '/auth/user') {
          return new Response(JSON.stringify({
            serviceworker: true
          }, {
            headers: { 'Content-Type': 'application/json' }
          }));
        }

        if (requestURL.origin === location.origin) {
          return caches.match('/');
        }
      });
    }));
  }
});

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL1VzZXJzL2NocmlzLy5udm0vdmVyc2lvbnMvbm9kZS92NS4wLjAvbGliL25vZGVfbW9kdWxlcy93YXRjaGlmeS9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwicHVibGljL3NlcnZpY2V3b3JrZXItZXM2LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQSxJQUFNLE9BQU8sR0FBRyxDQUFDLENBQUM7O0FBRWxCLGFBQWEsQ0FBQyxxQ0FBcUMsQ0FBQyxDQUFDOztBQUVyRCxJQUFNLGVBQWUsR0FBRyxjQUFjLEdBQUcsT0FBTyxDQUFDO0FBQ2pELElBQU0scUJBQXFCLEdBQUcscUJBQXFCLEdBQUcsT0FBTyxDQUFDOztBQUU5RCxJQUFNLGlCQUFpQixHQUFHLENBQ3hCLGVBQWUsRUFDZixxQkFBcUIsQ0FDdEIsQ0FBQzs7QUFFRixJQUFJLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxFQUFFLFVBQUEsS0FBSyxFQUFJO0FBQ3hDLE9BQUssQ0FBQyxTQUFTLENBQ2IsTUFBTSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FDekIsSUFBSSxDQUFDLFVBQUEsS0FBSyxFQUFJO0FBQ2IsV0FBTyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQ2xCLEdBQUcsRUFDSCxjQUFjLEVBQ2QsaUJBQWlCLEVBQ2pCLHlCQUF5QixFQUN6QixnQkFBZ0IsRUFDaEIsc0JBQXNCLENBQ3ZCLENBQUMsQ0FBQztHQUNKLENBQUMsQ0FDTCxDQUFDO0NBQ0gsQ0FBQyxDQUFDOztBQUVILElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxVQUFVLEVBQUUsVUFBQSxLQUFLLEVBQUk7QUFDekMsT0FBSyxDQUFDLFNBQVMsQ0FDYixNQUFNLENBQUMsSUFBSSxFQUFFLENBQ1YsSUFBSSxDQUFDLFVBQUEsVUFBVSxFQUFJO0FBQ2xCLFdBQU8sT0FBTyxDQUFDLEdBQUcsQ0FDaEIsVUFBVSxDQUFDLEdBQUcsQ0FBQyxVQUFBLFNBQVMsRUFBSTtB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O0FBQ2pDLHlCQUFhLEVBQUUsSUFBSTtXQUNwQixFQUFFO0FBQ0QsbUJBQU8sRUFBRSxFQUFFLGNBQWMsRUFBRSxrQkFBa0IsRUFBRTtXQUNoRCxDQUFDLENBQUMsQ0FBQztTQUNMOztBQUVELFlBQUksVUFBVSxDQUFDLE1BQU0sS0FBSyxRQUFRLENBQUMsTUFBTSxFQUFFO0FBQ3pDLGlCQUFPLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDMUI7T0FDRixDQUFDLENBQUM7S0FDSixDQUFDLENBQ0wsQ0FBQztHQUNIO0NBQ0YsQ0FBQyxDQUFDIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImNvbnN0IHZlcnNpb24gPSAxO1xuXG5pbXBvcnRTY3JpcHRzKCcvanMvc2VydmljZXdvcmtlci1jYWNoZS1wb2x5ZmlsbC5qcycpO1xuXG5jb25zdCBjYWNoZU5hbWVTdGF0aWMgPSAnam90LXN0YXRpYy12JyArIHZlcnNpb247XG5jb25zdCBjYWNoZU5hbWVHb29nbGVBdmF0YXIgPSAnam90LWdvb2dsZS1hdmF0YXItdicgKyB2ZXJzaW9uO1xuXG5jb25zdCBjdXJyZW50Q2FjaGVOYW1lcyA9IFtcbiAgY2FjaGVOYW1lU3RhdGljLFxuICBjYWNoZU5hbWVHb29nbGVBdmF0YXIsXG5dO1xuXG5zZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ2luc3RhbGwnLCBldmVudCA9PiB7XG4gIGV2ZW50LndhaXRVbnRpbChcbiAgICBjYWNoZXMub3BlbihjYWNoZU5hbWVTdGF0aWMpXG4gICAgICAudGhlbihjYWNoZSA9PiB7XG4gICAgICAgIHJldHVybiBjYWNoZS5hZGRBbGwoW1xuICAgICAgICAgICcvJyxcbiAgICAgICAgICAnL2Nzcy9hcHAuY3NzJyxcbiAgICAgICAgICAnL2pzL2Rpc3QvYXBwLmpzJyxcbiAgICAgICAgICAnL2pzL2Jyb3dzZXItcG9seWZpbGwuanMnLFxuICAgICAgICAgICcvanMvcG91Y2hkYi5qcycsXG4gICAgICAgICAgJy9qcy93ZWJmb250bG9hZGVyLmpzJyxcbiAgICAgICAgXSk7XG4gICAgICB9KVxuICApO1xufSk7XG5cbnNlbGYuYWRkRXZlbnRMaXN0ZW5lcignYWN0aXZhdGUnLCBldmVudCA9PiB7XG4gIGV2ZW50LndhaXRVbnRpbChcbiAgICBjYWNoZXMua2V5cygpXG4gICAgICAudGhlbihjYWNoZU5hbWVzID0+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFxuICAgICAgICAgIGNhY2hlTmFtZXMubWFwKGNhY2hlTmFtZSA9PiB7XG4gICAgICAgICAgICBpZiAoY3VycmVudENhY2hlTmFtZXMuaW5kZXhPZihjYWNoZU5hbWUpID09PSAtMSkge1xuICAgICAgICAgICAgICByZXR1cm4gY2FjaGVzLmRlbGV0ZShjYWNoZU5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICB9KVxuICApO1xufSk7XG5cbnNlbGYuYWRkRXZlbnRMaXN0ZW5lcignZmV0Y2gnLCBldmVudCA9PiB7XG4gIGNvbnN0IHNlbGZVUkwgPSBzZWxmLmxvY2F0aW9uO1xuICBjb25zdCByZXF1ZXN0VVJMID0gbmV3IFVSTChldmVudC5yZXF1ZXN0LnVybCk7XG5cbiAgaWYgKHJlcXVlc3RVUkwucGF0aG5hbWUuaW5kZXhPZignL2F1dGgvJykgPT09IDAgJiYgcmVxdWVzdFVSTC5wYXRobmFtZSAhPT0gJy9hdXRoL3VzZXInKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gaWYgbm8gZXh0ZW5zaW9uLCBhc3N1bWUgaXQncyBhIHBhZ2UgKG5vdCByb290KVxuICBpZiAoc2VsZlVSTC5ob3N0ID09PSByZXF1ZXN0VVJMLmhvc3QgJiYgcmVxdWVzdFVSTC5wYXRobmFtZS5pbmRleE9mKCcuJykgPT09IC0xICYmIHJlcXVlc3RVUkwucGF0aG5hbWUgIT09ICcvYXV0aC91c2VyJykge1xuICAgIGV2ZW50LnJlc3BvbmRXaXRoKGNhY2hlcy5tYXRjaCgnLycpLnRoZW4oY2FjaGVSZXNwb25zZSA9PiB7XG4gICAgICByZXR1cm4gY2FjaGVSZXNwb25zZTtcbiAgICB9LCBlcnIgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ3N3IG1hdGNoIGVycm9yOiAnLCBlcnIpO1xuICAgIH0pKTtcbiAgfSBlbHNlIHtcbiAgICBldmVudC5yZXNwb25kV2l0aChcbiAgICAgIGNhY2hlcy5tYXRjaChldmVudC5yZXF1ZXN0KVxuICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgaWYgKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgZmV0Y2hSZXF1ZXN0ID0gZXZlbnQucmVxdWVzdC5jbG9uZSgpO1xuXG4gICAgICAgICAgcmV0dXJuIGZldGNoKGZldGNoUmVxdWVzdCkudGhlbihmZXRjaFJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgIGxldCBzaG91bGRDYWNoZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICBpZiAoZmV0Y2hSZXNwb25zZS50eXBlID09PSAnYmFzaWMnICYmIGZldGNoUmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgLy8gc2hvdWxkQ2FjaGUgPSBjYWNoZU5hbWVTdGF0aWM7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGZldGNoUmVzcG9uc2UudHlwZSA9PT0gJ29wYXF1ZScpIHsgLy8gaWYgcmVzcG9uc2UgaXNuJ3QgZnJvbSBvdXIgb3JpZ2luIC8gZG9lc24ndCBzdXBwb3J0IENPUlNcbiAgICAgICAgICAgICAgaWYgKHJlcXVlc3RVUkwuaG9zdG5hbWUuaW5kZXhPZignLmdvb2dsZXVzZXJjb250ZW50LmNvbScpID4gLTEpIHtcbiAgICAgICAgICAgICAgICBzaG91bGRDYWNoZSA9IGNhY2hlTmFtZUdvb2dsZUF2YXRhcjtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBqdXN0IGxldCByZXNwb25zZSBwYXNzIHRocm91Z2gsIGRvbid0IGNhY2hlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHNob3VsZENhY2hlKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlVG9DYWNoZSA9IGZldGNoUmVzcG9uc2UuY2xvbmUoKTtcblxuICAgICAgICAgICAgICBjYWNoZXMub3BlbihzaG91bGRDYWNoZSlcbiAgICAgICAgICAgICAgICAudGhlbihjYWNoZSA9PiB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBjYWNoZVJlcXVlc3QgPSBldmVudC5yZXF1ZXN0LmNsb25lKCk7XG4gICAgICAgICAgICAgICAgICBjYWNoZS5wdXQoY2FjaGVSZXF1ZXN0LCByZXNwb25zZVRvQ2FjaGUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZmV0Y2hSZXNwb25zZTtcbiAgICAgICAgICB9LCBlcnIgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3N3IGZldGNoIGVycm9yOiAnLCBlcnIpO1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RVUkwucGF0aG5hbWUgPT09ICcvYXV0aC91c2VyJykge1xuICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBzZXJ2aWNld29ya2VyOiB0cnVlLFxuICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHJlcXVlc3RVUkwub3JpZ2luID09PSBsb2NhdGlvbi5vcmlnaW4pIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlcy5tYXRjaCgnLycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuICAgICk7XG4gIH1cbn0pO1xuIl19
